1.계정관리


\\ 패스워드 복잡성 설정

RHEL5 (레드헷 엔터프라이즈 리눅스) 레드헷이 개발한 컴퓨터 운영 체제

https://kkarijoo.tistory.com/60 버전별 커널 버전 안내 사이트

레드헷 계열 버전 확인하기 명령어 cat /etc/redhat-release

데비안 계열 버전 확인하기 명령어 cat /etc/debian_version

점검 내용 : 시스템 정책에 사용자 계정 (root 및 일반 계정 모두 해당) 패스워드 복잡성 관련 설정이 되어 있는지 점검

점검 목적 : 비인가자의 공격(브루트 포스 어택, 딕셔너리 어택)에 대비가 되어 있는지 확인하기 위함

영문,숫자,특수문자를 조합하여 2종류 조합 시 10자리 이상, 3종류 이상 조합시 8자리 이상의 패스워드가 설정된 경우
	(공공기관인 경우 9자리 이상이여야 한다/)



==> /etc/shadow 확인 해서 파일 내 설정된 패스워드 점검

/etc/pam.d/system-auth

팜 업데이트 yum -y install pam-devel.x86_64



여기서 pam은 리눅스 또는 GNU/kFreeBSD 시스템에서 애플리케이션과 서비스에 대한 동적 인증을 제공.

계정 모듈(auth) : 명시된 계정이 현재 조건에서 유효한 인증 목표인지를 검사. 계정 유효기간, 시간 그리고 사용자가 요청된 서비스에 접근 가능한지 같은 조건 포함

인증 모듈(account) : 비밀번호를 요청하고 검사하는 것 같이 사용자의 신원 확인, 인증 정보를 키링같은 다른 시스템들에게 전달

비밀번호 모듈(password) : 비밀번호 갱신을 책임짐

세션 모듈(session) : 세션 시작과 끝에 수행되는 행동 정의. 그 후 사용자는 성공적으로 인증

RHEL5 버전일경우

vi /etc/pam.d/system-auth 에서 모듈별로 되어 있는거 설정 변경 할수 있음 위에 참조!

설정하는 내용은 PDF자료에서 페이지 24쪽 참조

RHEL7 일 경우

PDF자료에서 페이지 24쪽 참조





\\ 계정 잠금 임계값 설정 ( 무작위 대응 막기 )

로그인 실패 임계값이 설정되어 있지 않을 경우 반복되는 로그인 시도에 대한 차단이 이루어지지 않아서 각종 공격에 취약하다.

********사용자 로그인 실패 임계 값은 시스템에 로그인 시 몇 번의 로그인 실패에 로그인을 차단할 것인지 결정하는 값

양 호 : 임계값이 5 이하의 값으로 설정되어있음

조치 방법 : 임계값을 5 이하로 설정

데비안 파일이 없었음.==> cat /etc/pam.d/system-auth (우분투, 칼리) 진행 못함

레드헷 진행 하였음 ==> vi /etc/pam.d/system-auth 진행 함  ==> 콘솔을 통한 로그인

password-auth ==> ssh 원격 접속, 또는 x-window(KED, Gnome) 로그인시

시도한거 확인하려면

pam_tally2 -u user100 하면 됨.

잘 안되면 참조 

https://jvvp.tistory.com/13


\\ 패스워드 파일 보호

시스템의 사용자 계정 정보가 저장된 파일 /etc/passwd, /etc/shadow 에 사용자 계정 패스워드가 암호화되어 저장되어 있는지 점검

일부 오래된 시스템의 경우 패스워드 정책이 적용되지 않아서 /etc/passwd 파일에 평문으로 저장되므로 사용자 계정 패스워드가 암호화되어

저장되어 있는지 점검하여야 한다.

양호 : 쉐도우 패스워드를 사용하거나, 패스워드를 암호화하여 저장하는 경우

취약 : 쉐도우 패스워드를 사용하지 않고, 패스워드를 암호화하여 저장하지 않는 경우

cat /etc/passwd 해서 두번째가 x로 되어있는지 확인하고

ls /etc/shadow 파일 확인





\\ 2. 파일 및 디렉토리 관리 > 2.1 root 홈, 패스 디렉터리 권한 및 패스 설정  ( PASS 이해하기 아직까진 너무 어려움 )

root 계정의 PATH 환경변수에 "."(현재 디렉터리 지칭)이 포함되어 있는지 점검

환경변수 : 프로세스가 컴퓨터에서 동작하는 방식에 영향을 미치는 동적인 값들의 집합으로 환경변수는 실행파일을 찾는 경로에 대한 변수임

양호 : PATH 환경변수에 "." 이 맨 앞이나 중간에 포함되지 않은 경우
취약 : PATH 환경변수에 "." 이 맨 앞이나 중간에 포함되어 있는 경우

셸에 따라서 다름

셸은

/bin/sh , /bin/csh , /bin/bash , /bin/ksh 이렇게 있음 


셸 확인하는 방법은

$ echo $SHELL 이다. 이렇게 하면 된다.


cat /etc/shells 하면 현재 셸을 보여준다.

셸이 제대로 작동을 안하면 vi /etc/shells 가서 수정해준다.

그리고 

vi /etc/profile 을 열어서 환경변수 값을 수정해준다. (bash 쉘과 ksh셸 sh셸은 이렇고 다른 쉘들은 각각 다르다.)

PATH=$PATH:$HOME/bin:. 이렇게 현재 디렉터리를 알려주는 ":."을 맨 뒤에다가 써준다.

센트OS에는 없었음





\\ 2. 파일 및 디렉토리 관리 > 2.2 파일 및 디렉터리 소유자 설정

소유자 불분명한 파일이나 디렉터리가 존재하는지 여부를 점검

